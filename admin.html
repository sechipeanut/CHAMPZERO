<!doctype html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ChampZero ‚Äî Admin Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #FFD700; --gold-darker: #C99700; --dark-bg: #111115; --dark-card: #1A1A1F; --sidebar-width: 280px; }
        body { font-family: 'Poppins', sans-serif; }
        .dark-input, .dark-select { background-color: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); color: #fff; }
        .dark-input:focus, .dark-select:focus { outline: none; border-color: var(--gold); }
        .dark-select option { background-color: var(--dark-card); color: white; }
        .admin-item { display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: var(--dark-card); border: 1px solid rgba(255,255,255,0.1); margin-bottom: 0.5rem; border-radius: 0.5rem; }
        .admin-item:hover { border-color: var(--gold); }
        .sidebar { position: fixed; left: 0; top: 64px; bottom: 0; width: var(--sidebar-width); background: var(--dark-card); border-right: 1px solid rgba(255,255,255,0.1); overflow-y: auto; z-index: 40; transition: transform 0.3s ease; }
        .sidebar-item { display: flex; align-items: center; gap: 12px; padding: 14px 24px; color: #9CA3AF; cursor: pointer; transition: all 0.2s; border-left: 3px solid transparent; }
        .sidebar-item:hover { background: rgba(255,215,0,0.05); color: white; }
        .sidebar-item.active { background: rgba(255,215,0,0.1); color: var(--gold); border-left-color: var(--gold); font-weight: 600; }
        .sidebar-item svg { width: 20px; height: 20px; flex-shrink: 0; }
        .content-wrapper { margin-left: var(--sidebar-width); padding-top: 64px; }
        .hamburger { display: none; position: fixed; left: 20px; top: 80px; z-index: 50; background: var(--dark-card); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; padding: 10px; cursor: pointer; transition: all 0.2s; }
        .hamburger:hover { background: rgba(255,215,0,0.1); border-color: var(--gold); }
        .hamburger-line { width: 24px; height: 2px; background: white; margin: 5px 0; transition: 0.3s; }
        @media (max-width: 1024px) {
            .sidebar { transform: translateX(-100%); }
            .sidebar.mobile-open { transform: translateX(0); }
            .content-wrapper { margin-left: 0; }
            .hamburger { display: block; }
            .mobile-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 35; top: 64px; }
            .mobile-overlay.active { display: block; }
        }
        .role-tab { background: transparent; color: #9CA3AF; border: 1px solid transparent; }
        .role-tab:hover { background: rgba(255,255,255,0.05); color: white; }
        .role-tab.active { background: rgba(255,215,0,0.1); color: var(--gold); border-color: var(--gold); font-weight: 600; }
        
        .status-badge { padding: 4px 10px; border-radius: 20px; font-size: 11px; font-weight: bold; text-transform: uppercase; }
        .status-pending { background: rgba(255, 166, 0, 0.2); color: orange; border: 1px solid rgba(255, 166, 0, 0.3); }
        .status-completed { background: rgba(0, 255, 128, 0.2); color: #00ff80; border: 1px solid rgba(0, 255, 128, 0.3); }
        .status-cancelled { background: rgba(255, 0, 0, 0.2); color: #ff4d4d; border: 1px solid rgba(255, 0, 0, 0.3); }
    </style>
</head>
<body class="bg-[var(--dark-bg)] text-gray-200 antialiased">

<div id="auth-loading-screen" class="fixed inset-0 z-[9999] bg-[var(--dark-bg)] flex items-center justify-center">
    <div class="text-center">
        <div class="relative inline-block mb-6">
            <div class="absolute inset-0 bg-[var(--gold)]/20 rounded-full blur-xl animate-pulse"></div>
            <div class="relative bg-gradient-to-br from-[var(--gold)]/20 to-orange-500/20 p-8 rounded-full border-2 border-[var(--gold)]/50">
                <svg class="w-16 h-16 text-[var(--gold)] animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                </svg>
            </div>
        </div>
        <h2 class="text-2xl font-bold text-white mb-2">Verifying Access</h2>
        <p class="text-gray-400 text-sm">Checking your permissions...</p>
    </div>
</div>

<div id="admin-content" class="hidden">

<header class="sticky top-0 z-50 bg-[var(--dark-bg)]/95 backdrop-blur-lg border-b border-white/10 h-16 flex items-center justify-between px-8">
    <div class="flex items-center gap-3">
        <span class="font-bold text-xl text-[var(--gold)]">ChampZero Admin</span>
    </div>
    <div class="flex items-center gap-4">
        <span id="admin-name-desktop" class="hidden md:block text-sm text-gray-300">
            <span class="text-[var(--gold)]">üëã</span> <span id="admin-display-name">Loading...</span>
        </span>
        <a href="/" class="text-sm hover:text-white text-gray-400">Back to Site</a>
    </div>
</header>

<button class="hamburger" id="hamburger-btn" onclick="toggleSidebar()">
    <div class="hamburger-line"></div>
    <div class="hamburger-line"></div>
    <div class="hamburger-line"></div>
</button>

<div class="mobile-overlay" id="mobile-overlay" onclick="toggleSidebar()"></div>

<aside class="sidebar" id="sidebar">
    <nav class="py-4">
        <div class="sidebar-item active" onclick="switchTab('config')" id="nav-config">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>
            <span>Home Statistics</span>
        </div>

        <div class="sidebar-item" onclick="switchTab('shop')" id="nav-shop">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path></svg>
            <span>Shop Settings</span>
        </div>

        <div class="sidebar-item" onclick="switchTab('users')" id="nav-users">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
            <span>User Management</span>
        </div>

        <div class="sidebar-item" onclick="switchTab('tournaments')" id="nav-tournaments">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg>
            <span>Tournaments</span>
        </div>

        <div class="sidebar-item" onclick="switchTab('events')" id="nav-events">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
            <span>Events</span>
        </div>

        <div class="sidebar-item" onclick="switchTab('talents')" id="nav-talents">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
            <span>Talents</span>
        </div>

        <div class="sidebar-item" onclick="switchTab('jobs')" id="nav-jobs">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
            <span>Careers</span>
        </div>

        <div class="sidebar-item" onclick="switchTab('notifications')" id="nav-notifications">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"></path></svg>
            <span>Announcements</span>
        </div>

        <div class="sidebar-item" onclick="switchTab('messages')" id="nav-messages">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
            <span>Inbox</span>
            <span id="msg-badge" class="hidden bg-red-600 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full ml-auto">New</span>
        </div>
    </nav>
</aside>

<main class="content-wrapper">
<div class="max-w-6xl mx-auto px-6 py-12">
    <h1 class="text-3xl font-bold text-white mb-8">Dashboard Overview</h1>

    <section id="tab-config" class="tab-content">
        <h2 class="text-2xl font-bold text-white mb-6">Home Page Statistics</h2>
        <div class="bg-[var(--dark-card)] p-6 rounded-xl border border-white/10 max-w-2xl">
            <form id="configForm" class="space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div><label class="block text-sm text-gray-400 mb-1">Total Talents</label><input id="cfg-talents" type="text" class="dark-input w-full p-3 rounded" required placeholder="e.g. 12+"></div>
                    <div><label class="block text-sm text-gray-400 mb-1">Combined Followers</label><input id="cfg-followers" type="text" class="dark-input w-full p-3 rounded" required placeholder="e.g. 10k+"></div>
                    <div><label class="block text-sm text-gray-400 mb-1">Prize Pool (‚Ç±)</label><input id="cfg-prizes" type="text" class="dark-input w-full p-3 rounded" required placeholder="e.g. 250,000+"></div>
                    <div><label class="block text-sm text-gray-400 mb-1">Events Hosted</label><input id="cfg-tournaments" type="text" class="dark-input w-full p-3 rounded" required placeholder="e.g. 50"></div>
                    <div><label class="block text-sm text-gray-400 mb-1">Registered Players</label><input id="cfg-players" type="text" class="dark-input w-full p-3 rounded" required placeholder="e.g. 1500+"></div>
                </div>
                <div class="pt-4 border-t border-white/10">
                    <button type="submit" class="bg-[var(--gold)] text-black font-bold px-6 py-3 rounded-lg hover:bg-yellow-400 transition-all flex items-center gap-2">Update Statistics</button>
                </div>
            </form>
        </div>
    </section>

    <section id="tab-shop" class="tab-content hidden">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold text-white">Shop Management</h2>
            <div class="flex gap-2">
                <button onclick="switchShopSubTab('inventory')" id="sub-shop-inventory" class="text-sm px-4 py-2 rounded-lg bg-[var(--gold)] text-black font-bold">Inventory</button>
                <button onclick="switchShopSubTab('orders')" id="sub-shop-orders" class="text-sm px-4 py-2 rounded-lg bg-white/10 hover:bg-white/20 text-white">Orders</button>
            </div>
        </div>

        <div id="shop-inventory-view">
            <div class="mb-4">
                <button onclick="openProductModal()" class="bg-[var(--gold)] text-black font-bold px-4 py-2 rounded-lg hover:bg-yellow-400 transition-all flex items-center gap-2 text-sm">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
                    Add Product
                </button>
            </div>
            <div id="shop-inventory-list" class="space-y-2"><p class="text-gray-500">Loading products...</p></div>
        </div>

        <div id="shop-orders-view" class="hidden">
            <div id="shop-orders-list" class="space-y-2"><p class="text-gray-500">Loading orders...</p></div>
        </div>
    </section>

    <section id="tab-users" class="tab-content hidden">
        <h2 class="text-xl font-bold text-white mb-6">User Management</h2>
        <div class="bg-[var(--dark-card)] p-4 rounded-xl border border-white/10 mb-6">
            <div class="flex flex-wrap gap-2 mb-4 border-b border-white/10 pb-4">
                <button onclick="filterUsersByRole('all')" id="role-tab-all" class="role-tab active px-4 py-2 rounded-lg font-medium transition-all text-sm flex-1 sm:flex-none">All</button>
                <button onclick="filterUsersByRole('admin')" id="role-tab-admin" class="role-tab px-4 py-2 rounded-lg font-medium transition-all text-sm flex-1 sm:flex-none">Admins</button>
                <button onclick="filterUsersByRole('user')" id="role-tab-user" class="role-tab px-4 py-2 rounded-lg font-medium transition-all text-sm flex-1 sm:flex-none">Users</button>
            </div>
            <div class="flex flex-col sm:flex-row gap-4 mb-4">
                <input type="text" id="user-search" placeholder="Search users by name or email..." class="dark-input flex-1 p-3 rounded">
                <button onclick="refreshUsers()" class="bg-[var(--gold)] text-black font-bold px-6 py-3 rounded hover:bg-yellow-400">Refresh</button>
            </div>
            <div class="flex flex-wrap gap-4 text-xs sm:text-sm text-gray-400">
                <span>Total: <strong id="user-count" class="text-white">0</strong></span>
                <span>Admins: <strong id="admin-count" class="text-yellow-400">0</strong></span>
                <span>Users: <strong id="regular-user-count" class="text-blue-400">0</strong></span>
            </div>
        </div>

        <div class="space-y-4">
            <div class="hidden md:flex px-4 text-gray-400 text-xs font-bold uppercase tracking-wider">
                <div class="flex-1">User Info</div>
                <div class="w-1/4">Role</div>
                <div class="w-1/6">Joined</div>
                <div class="w-1/4 text-right">Actions</div>
            </div>

            <div id="users-list-view" class="space-y-3">
                <div class="text-center py-12 text-gray-500">Loading users...</div>
            </div>
        </div>
    </section>

    <section id="tab-tournaments" class="tab-content hidden">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold text-white">Tournaments</h2>
            <button onclick="openTournamentModal()" class="bg-[var(--gold)] text-black font-bold px-4 md:px-6 py-3 rounded-lg hover:bg-yellow-400 transition-all flex items-center gap-2">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
                <span class="hidden md:inline">Create Tournament</span>
            </button>
        </div>
        <div id="tournaments-list" class="space-y-2"><p class="text-gray-500">Loading...</p></div>
    </section>

    <section id="tab-events" class="tab-content hidden">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold text-white">Events</h2>
            <button onclick="openEventModal()" class="bg-[var(--gold)] text-black font-bold px-4 md:px-6 py-3 rounded-lg hover:bg-yellow-400 transition-all flex items-center gap-2">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
                <span class="hidden md:inline">Create Event</span>
            </button>
        </div>
        <div id="events-list" class="space-y-2"><p class="text-gray-500">Loading...</p></div>
    </section>

    <section id="tab-jobs" class="tab-content hidden">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold text-white">Careers</h2>
            <button onclick="openJobModal()" class="bg-[var(--gold)] text-black font-bold px-4 md:px-6 py-3 rounded-lg hover:bg-yellow-400 transition-all flex items-center gap-2">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
                <span class="hidden md:inline">Create Job</span>
            </button>
        </div>
        <div id="jobs-list" class="space-y-2"><p class="text-gray-500">Loading...</p></div>
    </section>
    
    <section id="tab-talents" class="tab-content hidden">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold text-white">Rising Talents</h2>
            <button onclick="openTalentModal()" class="bg-[var(--gold)] text-black font-bold px-4 md:px-6 py-3 rounded-lg hover:bg-yellow-400 transition-all flex items-center gap-2">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
                <span class="hidden md:inline">Add Talent</span>
            </button>
        </div>
        <div id="talents-list" class="space-y-2"><p class="text-gray-500">Loading roster...</p></div>
    </section>

    <section id="tab-notifications" class="tab-content hidden">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold text-white">Announcements</h2>
            <button onclick="openNotificationModal()" class="bg-[var(--gold)] text-black font-bold px-4 md:px-6 py-3 rounded-lg hover:bg-yellow-400 transition-all flex items-center gap-2">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
                <span class="hidden md:inline">Create Announcement</span>
            </button>
        </div>
        <div id="notifications-list" class="space-y-2"><p class="text-gray-500">Loading...</p></div>
    </section>

    <section id="tab-messages" class="tab-content hidden">
        <h2 class="text-xl font-bold text-white mb-6">Inbox / Messages</h2>
        <div id="messages-list" class="grid grid-cols-1 gap-4 max-w-4xl">
            <p class="text-gray-500">Loading messages...</p>
        </div>
    </section>

</div>
</main>

<div id="productModal" class="hidden fixed inset-0 bg-black/70 backdrop-blur-sm z-[100] flex items-center justify-center p-4">
    <div class="bg-[var(--dark-card)] rounded-xl border border-white/20 w-full max-w-2xl max-h-[90vh] overflow-y-auto">
        <div class="sticky top-0 bg-[var(--dark-card)] border-b border-white/10 px-6 py-4 flex justify-between items-center">
            <h3 id="productModalTitle" class="text-xl font-bold text-white">Add Product</h3>
            <button onclick="closeModal('productModal')" class="text-gray-400 hover:text-white transition-colors">&times;</button>
        </div>
        <form id="productForm" class="p-6 space-y-4" novalidate>
            <div><label class="block text-sm text-gray-400 mb-1">Product Name</label><input id="p-name" type="text" required class="dark-input w-full p-3 rounded"></div>
            <div class="grid grid-cols-2 gap-4">
                <div><label class="block text-sm text-gray-400 mb-1">Price (Number)</label><input id="p-price" type="number" step="0.01" required class="dark-input w-full p-3 rounded"></div>
                <div>
                    <label class="block text-sm text-gray-400 mb-1">Category</label>
                    <select id="p-category" class="dark-input w-full p-3 rounded bg-[var(--dark-bg)]">
                        <option value="physical">Physical Gear</option>
                        <option value="digital">Digital Good</option>
                        <option value="services">Service</option>
                    </select>
                </div>
            </div>
            
            <div class="grid grid-cols-2 gap-4">
                <div><label class="block text-sm text-gray-400 mb-1">Stock Quantity</label><input id="p-stock" type="number" required class="dark-input w-full p-3 rounded" value="10"></div>
                <div><label class="block text-sm text-gray-400 mb-1">Featured?</label>
                    <div class="flex items-center h-10">
                        <input id="p-featured" type="checkbox" class="w-5 h-5 bg-transparent border-gray-600 rounded">
                        <span class="ml-2 text-gray-300">Show in Carousel</span>
                    </div>
                </div>
            </div>
            
            <div><label class="block text-sm text-gray-400 mb-1">Variants (comma separated)</label><input id="p-variants" type="text" placeholder="e.g. S, M, L, XL" class="dark-input w-full p-3 rounded"></div>
            
            <div><label class="block text-sm text-gray-400 mb-1">Image URL</label><input id="p-image" type="url" class="dark-input w-full p-3 rounded"></div>
            <div><label class="block text-sm text-gray-400 mb-1">Description</label><textarea id="p-desc" rows="3" required class="dark-input w-full p-3 rounded"></textarea></div>
            <div class="flex gap-3 pt-4">
                <button type="submit" class="flex-1 bg-[var(--gold)] text-black font-bold px-6 py-3 rounded-lg hover:bg-yellow-400 transition-all">Save Product</button>
                <button type="button" onclick="closeModal('productModal')" class="px-6 py-3 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-all">Cancel</button>
            </div>
        </form>
    </div>
</div>

<div id="orderModal" class="hidden fixed inset-0 bg-black/70 backdrop-blur-sm z-[100] flex items-center justify-center p-4">
    <div class="bg-[var(--dark-card)] rounded-xl border border-white/20 w-full max-w-xl max-h-[90vh] overflow-y-auto">
        <div class="sticky top-0 bg-[var(--dark-card)] border-b border-white/10 px-6 py-4 flex justify-between items-center">
            <h3 class="text-xl font-bold text-white">Order Details</h3>
            <button onclick="closeModal('orderModal')" class="text-gray-400 hover:text-white transition-colors">&times;</button>
        </div>
        <div id="order-modal-content" class="p-6 text-gray-300 text-sm space-y-4">
            </div>
        <div class="p-6 border-t border-white/10 text-right">
            <button onclick="closeModal('orderModal')" class="bg-white/10 hover:bg-white/20 text-white px-6 py-2 rounded-lg">Close</button>
        </div>
    </div>
</div>

<div id="tournamentModal" class="hidden fixed inset-0 bg-black/70 backdrop-blur-sm z-[100] flex items-center justify-center p-4">
    <div class="bg-[var(--dark-card)] rounded-xl border border-white/20 w-full max-w-2xl max-h-[90vh] overflow-y-auto">
        <div class="sticky top-0 bg-[var(--dark-card)] border-b border-white/10 px-6 py-4 flex justify-between items-center">
            <h3 id="tournamentModalTitle" class="text-xl font-bold text-white">Create Tournament</h3>
            <button onclick="closeModal('tournamentModal')" class="text-gray-400 hover:text-white transition-colors">&times;</button>
        </div>
        <form id="tournamentForm" class="p-6 space-y-4" novalidate>
            <div><label for="t-name" class="block text-sm text-gray-400 mb-1">Tournament Name</label><input id="t-name" type="text" required class="dark-input w-full p-3 rounded"></div>
            <div><label for="t-game" class="block text-sm text-gray-400 mb-1">Game Title</label><input id="t-game" type="text" placeholder="Valorant" required class="dark-input w-full p-3 rounded"></div>
            <div>
                <label for="t-format" class="block text-sm text-gray-400 mb-1">Bracket Format</label>
                <select id="t-format" class="dark-input w-full p-3 rounded bg-[var(--dark-bg)]">
                    <option value="Single Elimination">Single Elimination</option>
                    <option value="Double Elimination">Double Elimination</option>
                    <option value="Round Robin">Round Robin</option>
                </select>
            </div>
            <div><label for="t-prize" class="block text-sm text-gray-400 mb-1">Prize Pool (‚Ç±)</label><input id="t-prize" type="number" required class="dark-input w-full p-3 rounded"></div>
            <div class="grid grid-cols-2 gap-4">
                <div><label for="t-date" class="block text-sm text-gray-400 mb-1">Start Date</label><input id="t-date" type="date" required class="dark-input w-full p-3 rounded"></div>
                <div><label for="t-end-date" class="block text-sm text-gray-400 mb-1">End Date</label><input id="t-end-date" type="date" class="dark-input w-full p-3 rounded"></div>
            </div>
            <div><label for="t-banner" class="block text-sm text-gray-400 mb-1">Banner Image URL</label><input id="t-banner" type="url" class="dark-input w-full p-3 rounded"></div>
            <div class="flex gap-3 pt-4">
                <button type="submit" class="flex-1 bg-[var(--gold)] text-black font-bold px-6 py-3 rounded-lg hover:bg-yellow-400 transition-all">Save Tournament</button>
                <button type="button" onclick="closeModal('tournamentModal')" class="px-6 py-3 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-all">Cancel</button>
            </div>
        </form>
    </div>
</div>

<div id="eventModal" class="hidden fixed inset-0 bg-black/70 backdrop-blur-sm z-[100] flex items-center justify-center p-4">
    <div class="bg-[var(--dark-card)] rounded-xl border border-white/20 w-full max-w-2xl max-h-[90vh] overflow-y-auto">
        <div class="sticky top-0 bg-[var(--dark-card)] border-b border-white/10 px-6 py-4 flex justify-between items-center">
            <h3 id="eventModalTitle" class="text-xl font-bold text-white">Create Event</h3>
            <button onclick="closeModal('eventModal')" class="text-gray-400 hover:text-white transition-colors">&times;</button>
        </div>
        <form id="eventForm" class="p-6 space-y-4" novalidate>
            <div><label for="e-name" class="block text-sm text-gray-400 mb-1">Event Title</label><input id="e-name" type="text" required class="dark-input w-full p-3 rounded"></div>
            <div class="grid grid-cols-2 gap-4">
                <div><label for="e-date" class="block text-sm text-gray-400 mb-1">Start Date</label><input id="e-date" type="date" required class="dark-input w-full p-3 rounded"></div>
                <div><label for="e-end-date" class="block text-sm text-gray-400 mb-1">End Date</label><input id="e-end-date" type="date" class="dark-input w-full p-3 rounded"></div>
            </div>
            <div><label for="e-desc" class="block text-sm text-gray-400 mb-1">Description</label><textarea id="e-desc" rows="4" required class="dark-input w-full p-3 rounded"></textarea></div>
            <div><label for="e-banner" class="block text-sm text-gray-400 mb-1">Banner Image URL</label><input id="e-banner" type="url" class="dark-input w-full p-3 rounded"></div>
            <div class="flex gap-3 pt-4">
                <button type="submit" class="flex-1 bg-[var(--gold)] text-black font-bold px-6 py-3 rounded-lg hover:bg-yellow-400 transition-all">Save Event</button>
                <button type="button" onclick="closeModal('eventModal')" class="px-6 py-3 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-all">Cancel</button>
            </div>
        </form>
    </div>
</div>

<div id="jobModal" class="hidden fixed inset-0 bg-black/70 backdrop-blur-sm z-[100] flex items-center justify-center p-4">
    <div class="bg-[var(--dark-card)] rounded-xl border border-white/20 w-full max-w-2xl max-h-[90vh] overflow-y-auto">
        <div class="sticky top-0 bg-[var(--dark-card)] border-b border-white/10 px-6 py-4 flex justify-between items-center">
            <h3 id="jobModalTitle" class="text-xl font-bold text-white">Create Job</h3>
            <button onclick="closeModal('jobModal')" class="text-gray-400 hover:text-white transition-colors">&times;</button>
        </div>
        <form id="jobForm" class="p-6 space-y-4" novalidate>
            <div><label for="j-title" class="block text-sm text-gray-400 mb-1">Job Title</label><input id="j-title" type="text" required class="dark-input w-full p-3 rounded"></div>
            <div><label for="j-location" class="block text-sm text-gray-400 mb-1">Location</label><input id="j-location" type="text" placeholder="Remote / Manila" required class="dark-input w-full p-3 rounded"></div>
            <div><label for="j-type" class="block text-sm text-gray-400 mb-1">Type</label><input id="j-type" type="text" placeholder="Full-time / Contract" required class="dark-input w-full p-3 rounded"></div>
            <div class="flex gap-3 pt-4">
                <button type="submit" class="flex-1 bg-[var(--gold)] text-black font-bold px-6 py-3 rounded-lg hover:bg-yellow-400 transition-all">Save Job</button>
                <button type="button" onclick="closeModal('jobModal')" class="px-6 py-3 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-all">Cancel</button>
            </div>
        </form>
    </div>
</div>

<div id="talentModal" class="hidden fixed inset-0 bg-black/70 backdrop-blur-sm z-[100] flex items-center justify-center p-4">
    <div class="bg-[var(--dark-card)] rounded-xl border border-white/20 w-full max-w-2xl max-h-[90vh] overflow-y-auto">
        <div class="sticky top-0 bg-[var(--dark-card)] border-b border-white/10 px-6 py-4 flex justify-between items-center">
            <h3 id="talentModalTitle" class="text-xl font-bold text-white">Add Talent</h3>
            <button onclick="closeModal('talentModal')" class="text-gray-400 hover:text-white transition-colors">&times;</button>
        </div>
        <form id="talentForm" class="p-6 space-y-4" novalidate>
            <div><label for="tal-name" class="block text-sm text-gray-400 mb-1">Name / IGN</label><input id="tal-name" type="text" required class="dark-input w-full p-3 rounded"></div>
            <div><label for="tal-role" class="block text-sm text-gray-400 mb-1">Role</label>
                <select id="tal-role" class="dark-input w-full p-3 rounded bg-[var(--dark-bg)]">
                    <option value="Streamer">Streamer</option>
                    <option value="Caster">Caster</option>
                    <option value="Cosplayer">Cosplayer</option>
                    <option value="Content Creator">Content Creator</option>
                </select>
            </div>
            <div><label for="tal-img" class="block text-sm text-gray-400 mb-1">Profile Image URL</label><input id="tal-img" type="url" placeholder="https://..." class="dark-input w-full p-3 rounded"></div>
            <div><label for="tal-link" class="block text-sm text-gray-400 mb-1">Social Link</label><input id="tal-link" type="url" placeholder="FB/Twitch URL" class="dark-input w-full p-3 rounded"></div>
            <div><label for="tal-bio" class="block text-sm text-gray-400 mb-1">Short Bio</label><textarea id="tal-bio" rows="3" class="dark-input w-full p-3 rounded"></textarea></div>
            <div class="flex gap-3 pt-4">
                <button type="submit" class="flex-1 bg-[var(--gold)] text-black font-bold px-6 py-3 rounded-lg hover:bg-yellow-400 transition-all">Save Talent</button>
                <button type="button" onclick="closeModal('talentModal')" class="px-6 py-3 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-all">Cancel</button>
            </div>
        </form>
    </div>
</div>

<div id="notificationModal" class="hidden fixed inset-0 bg-black/70 backdrop-blur-sm z-[100] flex items-center justify-center p-4">
    <div class="bg-[var(--dark-card)] rounded-xl border border-white/20 w-full max-w-2xl max-h-[90vh] overflow-y-auto">
        <div class="sticky top-0 bg-[var(--dark-card)] border-b border-white/10 px-6 py-4 flex justify-between items-center">
            <h3 id="notificationModalTitle" class="text-xl font-bold text-white">Create Announcement</h3>
            <button onclick="closeModal('notificationModal')" class="text-gray-400 hover:text-white transition-colors">&times;</button>
        </div>
        <form id="notifForm" class="p-6 space-y-4" novalidate>
            <div><label for="n-title" class="block text-sm text-gray-400 mb-1">Title</label><input id="n-title" type="text" placeholder="New Tournament Live!" required class="dark-input w-full p-3 rounded"></div>
            <div><label for="n-type" class="block text-sm text-gray-400 mb-1">Type</label>
                <select id="n-type" class="dark-input w-full p-3 rounded bg-[var(--dark-bg)]">
                    <option value="general">General üì¢</option>
                    <option value="tournament">Tournament üèÜ</option>
                    <option value="event">Event üéâ</option>
                    <option value="alert">Alert ‚ö†Ô∏è</option>
                </select>
            </div>
            <div><label for="n-message" class="block text-sm text-gray-400 mb-1">Message</label><textarea id="n-message" rows="4" required class="dark-input w-full p-3 rounded"></textarea></div>
            <div class="flex gap-3 pt-4">
                <button type="submit" class="flex-1 bg-[var(--gold)] text-black font-bold px-6 py-3 rounded-lg hover:bg-yellow-400 transition-all">Send Announcement</button>
                <button type="button" onclick="closeModal('notificationModal')" class="px-6 py-3 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-all">Cancel</button>
            </div>
        </form>
    </div>
</div>

<div id="userModal" class="hidden fixed inset-0 bg-black/70 backdrop-blur-sm z-[100] flex items-center justify-center p-4">
    <div class="bg-[var(--dark-card)] rounded-xl border border-white/10 w-full max-w-lg shadow-2xl">
        <div class="p-6 user-dialog-content">
            </div>
    </div>
</div>

<div id="customAlertModal" class="fixed inset-0 z-[110] hidden flex items-center justify-center p-4">
    <div id="alertBackdrop" class="absolute inset-0 bg-black/90 backdrop-blur-sm"></div>
    <div id="alertBox" class="relative bg-[var(--dark-card)] border border-white/20 rounded-xl p-6 shadow-2xl max-w-sm w-full text-center transform scale-95 opacity-0 transition-all duration-300">
        <h3 id="alertTitle" class="text-xl font-bold text-white mb-2">Notification</h3>
        <p id="alertMessage" class="text-gray-400 text-sm mb-6 leading-relaxed">Message...</p>
        <div id="alertButtons" class="flex justify-center gap-3"></div>
    </div>
</div>

<script>
    window.switchTab = function(tabName) {
        document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
        document.getElementById(`tab-${tabName}`).classList.remove('hidden');
        
        document.querySelectorAll('.sidebar-item').forEach(item => item.classList.remove('active'));
        const activeItem = document.getElementById(`nav-${tabName}`);
        if(activeItem) activeItem.classList.add('active');
        
        if(tabName === 'users' && !window.usersLoaded && window.fetchUsers) window.fetchUsers();
        if(tabName === 'shop') fetchShopData('inventory');
        
        if(window.innerWidth <= 1024) toggleSidebar();
    }
    
    window.switchShopSubTab = function(view) {
        document.getElementById('shop-inventory-view').classList.toggle('hidden', view !== 'inventory');
        document.getElementById('shop-orders-view').classList.toggle('hidden', view !== 'orders');
        
        document.getElementById('sub-shop-inventory').classList.toggle('bg-[var(--gold)]', view === 'inventory');
        document.getElementById('sub-shop-inventory').classList.toggle('text-black', view === 'inventory');
        document.getElementById('sub-shop-inventory').classList.toggle('text-white', view !== 'inventory');
        document.getElementById('sub-shop-inventory').classList.toggle('bg-white/10', view !== 'inventory');
        
        document.getElementById('sub-shop-orders').classList.toggle('bg-[var(--gold)]', view === 'orders');
        document.getElementById('sub-shop-orders').classList.toggle('text-black', view === 'orders');
        document.getElementById('sub-shop-orders').classList.toggle('text-white', view !== 'orders');
        document.getElementById('sub-shop-orders').classList.toggle('bg-white/10', view !== 'orders');
        
        if(window.fetchShopData) window.fetchShopData(view);
    }
    
    function toggleSidebar() {
        document.getElementById('sidebar').classList.toggle('mobile-open');
        document.getElementById('mobile-overlay').classList.toggle('active');
    }
    
    window.addEventListener('resize', () => {
        if(window.innerWidth > 1024) {
            document.getElementById('sidebar').classList.remove('mobile-open');
            document.getElementById('mobile-overlay').classList.remove('active');
        }
    });
    
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
            ['tournamentModal', 'eventModal', 'jobModal', 'talentModal', 'notificationModal', 'userModal', 'productModal', 'orderModal'].forEach(id => {
                const modal = document.getElementById(id);
                if (modal && !modal.classList.contains('hidden')) closeModal(id);
            });
        }
    });
    
    const tStartDate = document.getElementById('t-date');
    const tEndDate = document.getElementById('t-end-date');
    if (tStartDate && tEndDate) {
        tStartDate.addEventListener('change', () => {
            if (tStartDate.value) tEndDate.setAttribute('min', tStartDate.value);
        });
    }

    const eStartDate = document.getElementById('e-date');
    const eEndDate = document.getElementById('e-end-date');
    if (eStartDate && eEndDate) {
        eStartDate.addEventListener('change', () => {
            if (eStartDate.value) eEndDate.setAttribute('min', eStartDate.value);
        });
    }

    // Modal Helper for Custom Confirm
    function animateGenericOpen(modalId, backdropId, panelId) {
        const modal = document.getElementById(modalId);
        const backdrop = document.getElementById(backdropId);
        const panel = document.getElementById(panelId);
        if (!modal) return;
        modal.classList.remove('hidden');
        setTimeout(() => {
            backdrop.classList.remove('opacity-0');
            panel.classList.remove('opacity-0', 'scale-95');
            panel.classList.add('opacity-100', 'scale-100');
        }, 10);
    }

    function animateGenericClose(modalId, backdropId, panelId, callback) {
        const modal = document.getElementById(modalId);
        const backdrop = document.getElementById(backdropId);
        const panel = document.getElementById(panelId);
        if (!modal) return;
        backdrop.classList.add('opacity-0');
        panel.classList.remove('opacity-100', 'scale-100');
        panel.classList.add('opacity-0', 'scale-95');
        setTimeout(() => {
            modal.classList.add('hidden');
            if (callback) callback();
        }, 300);
    }

    window.showCustomConfirm = (title, message) => {
        return new Promise((resolve) => {
            const titleEl = document.getElementById('alertTitle');
            const msgEl = document.getElementById('alertMessage');
            const btnContainer = document.getElementById('alertButtons');
            if (!document.getElementById('customAlertModal')) { resolve(confirm(message)); return; }
            
            titleEl.textContent = title;
            msgEl.innerHTML = message;
            btnContainer.innerHTML = '';
            
            const cancelBtn = document.createElement('button');
            cancelBtn.className = "px-5 py-2 bg-white/10 text-gray-300 rounded-lg text-sm font-bold hover:bg-white/20 transition-colors";
            cancelBtn.textContent = "Cancel";
            cancelBtn.onclick = () => { animateGenericClose('customAlertModal', 'alertBackdrop', 'alertBox'); resolve(false); };
            
            const confirmBtn = document.createElement('button');
            confirmBtn.className = "px-5 py-2 bg-[var(--gold)] text-black rounded-lg text-sm font-bold hover:bg-yellow-400 transition-colors shadow-lg";
            confirmBtn.textContent = "Confirm";
            confirmBtn.onclick = () => { animateGenericClose('customAlertModal', 'alertBackdrop', 'alertBox'); resolve(true); };
            
            btnContainer.appendChild(cancelBtn);
            btnContainer.appendChild(confirmBtn);
            
            animateGenericOpen('customAlertModal', 'alertBackdrop', 'alertBox');
        });
    };
</script>

</div> 
<script src="js/toast.js"></script>
<script type="module" src="js/admin.js"></script>
</body>
</html>