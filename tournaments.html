<!doctype html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ChampZero — Tournaments</title>

    <meta name="description" content="Browse and join upcoming esports tournaments on ChampZero. Compete in Valorant, MLBB, and Honor of Kings for huge prize pools.">
    <meta property="og:title" content="ChampZero — Tournaments">
    <meta property="og:description" content="Compete in top-tier tournaments, get scouted, and win prizes.">
    <meta property="og:image" content="https://champzero.com/pictures/cz_logo.png">
    <meta property="twitter:card" content="summary_large_image">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

    <style>
        :root { 
            --gold: #FFD700;
            --gold-darker: #C99700;
            --dark-bg: #111115;
            --dark-card: #1A1A1F;
        }
        body { font-family: 'Poppins', sans-serif; }
        .text-glow { text-shadow: 0 0 8px rgba(255, 215, 0, 0.6), 0 0 20px rgba(255, 215, 0, 0.4); }
        .futuristic-bg { background-color: var(--dark-bg); background-image: linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px); background-size: 30px 30px; }
        
        /* Nav Links */
        .nav-link { position: relative; }
        .nav-link::after { content: ''; position: absolute; width: 100%; transform: scaleX(0); height: 2px; bottom: -4px; left: 0; background-color: var(--gold); transform-origin: bottom right; transition: transform 0.25s ease-out; }
        .nav-link:hover::after { transform: scaleX(1); transform-origin: bottom left; }
        
        /* Form Elements */
        .dark-input, .dark-select { background-color: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); color: #fff; }
        .dark-input:focus, .dark-select:focus { outline: none; border-color: var(--gold); box-shadow: 0 0 0 2px rgba(255, 215, 0, 0.3); }
        .dark-select option { background-color: var(--dark-card); color: white; }
        
        /* Focus Accessibility */
        :focus-visible { outline: 2px solid var(--gold); outline-offset: 4px; border-radius: 4px; }
    </style>
</head>
<body class="bg-[var(--dark-bg)] text-gray-200 antialiased futuristic-bg">

<header id="main-header" class="sticky top-0 z-50 bg-[var(--dark-bg)]/95 backdrop-blur-lg border-b border-white/10 transition-all duration-300">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex justify-between h-16 items-center">
    <a href="/" class="flex items-center gap-3">
        <img src="pictures/cz_logo.png" alt="ChampZero Logo" width="40" height="40" class="w-10 h-10 rounded-md object-cover">
        <span class="font-bold text-xl text-white">ChampZero</span>
    </a>
    <nav class="hidden md:flex items-center gap-8 text-sm">
        <a href="/" class="nav-link text-gray-300 hover:text-[var(--gold)] transition-colors">Home</a>
        <a href="/tournaments" class="nav-link text-[var(--gold)] font-semibold">Tournaments</a>
        <a href="/events" class="nav-link text-gray-300 hover:text-[var(--gold)] transition-colors">Events</a>
        <a href="/teams" class="nav-link text-gray-300 hover:text-[var(--gold)] transition-colors">Teams & Recruitment</a>
        <a href="/rising" class="nav-link text-gray-300 hover:text-[var(--gold)] transition-colors">Rising Champ</a>
        <a href="/partners" class="nav-link text-gray-300 hover:text-[var(--gold)] transition-colors">Partners</a>
        <a href="/shop" class="nav-link text-gray-300 hover:text-[var(--gold)] transition-colors">Shop</a>
    </nav>
    <div class="flex items-center gap-3">
        <div id="auth-controls-wrapper" class="relative">
            <div id="auth-controls" class="flex items-center gap-3">
                <a href="/login" class="text-sm px-3 py-1.5 rounded-md hover:bg-white/10 text-gray-300">Log In</a>
                <a href="/signup" class="hidden sm:inline-block bg-gradient-to-r from-[var(--gold-darker)] to-[var(--gold)] text-black px-4 py-2 rounded-md text-sm font-bold">Sign Up</a>
            </div>
        </div>
        <button id="mobile-menu-button" aria-label="Toggle navigation menu" class="md:hidden p-2 rounded-md text-gray-300 hover:bg-white/10">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
        </button>
    </div>
  </div>
</header>

<div id="mobile-menu" class="hidden md:hidden fixed inset-0 bg-[var(--dark-bg)] z-40 p-6">
    <nav class="flex flex-col items-center justify-center h-full gap-6 text-lg">
        <a href="/" class="text-gray-300 hover:text-[var(--gold)]">Home</a>
        <a href="/tournaments" class="text-[var(--gold)] font-semibold">Tournaments</a>
        <a href="/events" class="text-gray-300 hover:text-[var(--gold)]">Events</a>
        <a href="/teams" class="text-gray-300 hover:text-[var(--gold)]">Teams & Recruitment</a>
        <a href="/rising" class="text-gray-300 hover:text-[var(--gold)]">Rising Champ</a>
        <a href="/shop" class="text-gray-300 hover:text-[var(--gold)]">Shop</a>
        <div class="border-t border-white/20 mt-6 pt-6 flex gap-4">
             <a href="/login" class="text-sm px-4 py-2 rounded-md text-gray-300 ring-1 ring-gray-600">Log in</a>
            <a href="/signup" class="bg-gradient-to-r from-[var(--gold-darker)] to-[var(--gold)] text-black px-4 py-2 rounded-md text-sm font-bold">Sign Up</a>
        </div>
    </nav>
</div>

<main class="max-w-7xl mx-auto px-6 sm:px-8 py-12">
  <section class="text-center mb-12">
    <h1 class="text-5xl md:text-6xl font-extrabold text-glow text-[var(--gold)]">Tournament Hub</h1>
    <p class="mt-4 text-lg text-gray-300 max-w-2xl mx-auto">Explore, compete, and conquer. The central arena for all ChampZero esports action.</p>
  </section>

  <section class="mb-8 p-4 bg-[var(--dark-card)] rounded-xl border border-white/10 sticky top-[72px] z-30 backdrop-blur-lg shadow-lg">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 items-center">
      <div class="md:col-span-2">
          <label for="searchName" class="sr-only">Search Tournaments</label>
          <input id="searchName" type="text" placeholder="Search by tournament name..." class="dark-input p-2 rounded-lg w-full text-sm" />
      </div>
      <div class="flex gap-4">
          <label for="filterGame" class="sr-only">Filter by Game</label>
          <select id="filterGame" class="dark-select p-2 rounded-lg w-full text-sm">
              <option value="">All Games</option>
              <option value="Valorant">Valorant</option>
              <option value="MLBB">Mobile Legends</option>
              <option value="HoK">Honor of Kings</option>
          </select>
          <label for="filterStatus" class="sr-only">Filter by Status</label>
          <select id="filterStatus" class="dark-select p-2 rounded-lg w-full text-sm">
              <option value="">All Status</option>
              <option value="upcoming">Upcoming</option>
              <option value="ongoing">Ongoing</option>
              <option value="past">Past</option>
          </select>
      </div>
      <div>
          <label for="sortBy" class="sr-only">Sort By</label>
          <select id="sortBy" class="dark-select p-2 rounded-lg w-full text-sm">
              <option value="dateDesc">Date (Newest)</option>
              <option value="dateAsc">Date (Oldest)</option>
              <option value="prizeDesc">Prize (Highest)</option>
          </select>
      </div>
    </div>
  </section>
  
  <section id="featured-tournament-slot" class="mb-8"></section>
  
  <section id="tournamentGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      <div class="col-span-full text-center text-gray-500 py-12">Loading tournaments...</div>
  </section>
</main>

<div id="detailsModal" class="fixed inset-0 bg-black/80 backdrop-blur-sm hidden flex items-center justify-center z-50 p-4 transition-opacity duration-300">
  <div class="bg-[var(--dark-card)] border border-white/10 rounded-xl w-full md:w-2/3 lg:w-1/2 p-6 relative max-h-[90vh] overflow-auto shadow-2xl">
    <div id="detailBanner" class="mb-4"></div>
    <h3 id="detailTitle" class="text-3xl font-bold mb-2 text-white"></h3>
    <div id="detailMeta" class="mb-4 text-sm text-gray-300 flex flex-wrap gap-x-6 gap-y-2"></div>
    <div class="border-t border-white/10 my-4"></div>
    <div id="detailDesc" class="mb-4 text-gray-300 leading-relaxed"></div>
    <div id="detailParticipants" class="mb-6">
      <h4 class="font-semibold text-lg text-white mb-2">Participants</h4>
      <ul id="participantsList" class="bg-black/20 p-4 rounded-lg space-y-2 text-sm text-gray-300 max-h-40 overflow-y-auto"></ul>
    </div>
    <div class="flex justify-end">
        <button onclick="closeModal('detailsModal')" class="bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-md transition-colors">Close</button>
    </div>
    <button onclick="closeModal('detailsModal')" aria-label="Close modal" class="absolute top-4 right-4 text-gray-400 hover:text-white font-bold text-2xl">&times;</button>
  </div>
</div>

<footer class="border-t border-white/10 bg-[var(--dark-bg)] mt-20">
    <div class="max-w-7xl mx-auto px-6 sm:px-8 py-12 grid grid-cols-1 md:grid-cols-3 gap-8">
        <div>
            <div class="flex items-center gap-3"><img src="pictures/cz_logo.png" alt="ChampZero Logo" width="40" height="40" class="w-10 h-10 rounded-md object-cover"><div><div class="font-bold text-white text-lg">ChampZero</div><div class="text-sm text-gray-400">Esports Ecosystem</div></div></div>
            <p class="mt-4 text-sm text-gray-400">Building community-driven tournaments, talent development, and esports services.</p>
            <div class="mt-4 text-sm text-gray-500">© 2025 ChampZero. All rights reserved.</div>
        </div>
        <div>
            <h4 class="font-semibold text-white">Quick Links</h4>
            <ul class="mt-3 text-sm text-gray-400 space-y-2">
                <li><a href="/about" class="hover:text-[var(--gold)]">About Us</a></li><li><a href="/contact" class="hover:text-[var(--gold)]">Contact</a></li><li><a href="/terms" class="hover:text-[var(--gold)]">Terms & Privacy</a></li><li><a href="/careers" class="hover:text-[var(--gold)]">Careers</a></li>
            </ul>
        </div>
        <div>
            <h4 class="font-semibold text-white">Follow Us</h4>
            <div class="mt-3 flex items-center gap-3">
                <a href="https://facebook.com/champzeroph" target="_blank" rel="noopener noreferrer" aria-label="facebook" class="p-2 border border-white/20 rounded-md hover:border-[var(--gold)]/50 hover:text-[var(--gold)] transition-colors">FB</a>
                <a href="#" target="_blank" rel="noopener noreferrer" aria-label="youtube" class="p-2 border border-white/20 rounded-md hover:border-[var(--gold)]/50 hover:text-[var(--gold)] transition-colors">YT</a>
                <a href="#" target="_blank" rel="noopener noreferrer" aria-label="twitter" class="p-2 border border-white/20 rounded-md hover:border-[var(--gold)]/50 hover:text-[var(--gold)] transition-colors">X</a>
            </div>
        </div>
    </div>
</footer>

<script type="module" src="js/main.js"></script>
<script type="module" src="js/auth.js"></script>
<script type="module" src="js/tournaments.js"></script>
<script type="module" src="js/notifications.js"></script>

<script type="module">
    import { db } from './js/firebase-config.js';
    import { doc, getDoc } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-firestore.js";

    document.addEventListener('DOMContentLoaded', async () => {
        // 1. Check URL for "?id="
        const params = new URLSearchParams(window.location.search);
        const tournamentId = params.get('id');

        if (tournamentId) {
            console.log("Opening Tournament:", tournamentId);
            const docRef = doc(db, "tournaments", tournamentId);
            const docSnap = await getDoc(docRef);

            if (docSnap.exists()) {
                const data = docSnap.data();
                
                // 2. Populate Modal (Matching your HTML IDs)
                const titleEl = document.getElementById('detailTitle');
                const metaEl = document.getElementById('detailMeta');
                const descEl = document.getElementById('detailDesc');
                const bannerEl = document.getElementById('detailBanner');

                if (titleEl) titleEl.textContent = data.name;
                if (descEl) descEl.textContent = `Game: ${data.game} \nPrize: ${data.prize} \nStatus: ${data.status}`;
                
                // Meta Tags
                if (metaEl) {
                    metaEl.innerHTML = `
                        <span class="bg-[var(--gold)] text-black px-2 py-0.5 rounded text-xs font-bold">${data.status || 'Upcoming'}</span>
                        <span class="flex items-center gap-1"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg> ${data.date || 'TBA'}</span>
                    `;
                }

                // Banner
                if (bannerEl && data.banner) {
                    bannerEl.innerHTML = `<img src="${data.banner}" class="w-full h-48 object-cover rounded-lg border border-white/10">`;
                }

                // 3. Show Modal
                const modal = document.getElementById('detailsModal');
                if (modal) {
                    modal.classList.remove('hidden');
                    modal.classList.add('flex');
                }

                // 4. Clean URL (Remove ID so refresh doesn't reopen it)
                const newUrl = window.location.protocol + "//" + window.location.host + window.location.pathname;
                window.history.pushState({path:newUrl},'',newUrl);
            }
        }
    });
</script>


</body>
</html>